<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                    
             xmlns:model="clr-namespace:Business.Models;assembly=Business"
             xmlns:viewmodels="clr-namespace:MauiApp1.ViewModels"
             x:DataType="{x:Type viewmodels:MainViewModel}"
             
             x:Class="MauiApp1.MainPage">

    <ScrollView>
        <Grid RowDefinitions="auto, *" 
              Margin="20"
              RowSpacing="0">
            <Label Text="Please fill out the form" Margin="100,0,0,0"/>

            <VerticalStackLayout Grid.Row="0" Margin="10,40,10,0">
                <Label Text="First Name." Margin="0,10"/>
                <Entry Text="{Binding RegistrationForm.FirstName}"/>
                <Label Text="Last Name." Margin="0,10"/>
                <Entry Text="{Binding RegistrationForm.LastName}"/>
                <Label Text="Email." Margin="0,10"/>
                <Entry Text="{Binding RegistrationForm.Email}"/>
                <Label Text="Phone nr." Margin="0,10"/>
                <Entry Text="{Binding RegistrationForm.Phone}"/>
                <Label Text="Street." Margin="0,10"/>
                <Entry Text="{Binding RegistrationForm.Street}"/>
                <Label Text="City." Margin="0,10"/>
                <Entry Text="{Binding RegistrationForm.City}"/>
                <Label Text="ZipCode." Margin="0,10"/>
                <Entry Text="{Binding RegistrationForm.ZipCode}"/>
                <Button Command="{Binding CreateContactCommand}" 
                        Text="Add Contact to list" 
                        Margin="0,20,0,20" 
                        Padding="0,10"
                        WidthRequest="200"/>
            </VerticalStackLayout>

            <CollectionView Grid.Row="1" ItemsSource="{Binding ContactList}" Margin="0,40,0,0">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="{x:Type model:ContactRegForm}">
                        <Grid ColumnDefinitions="*, auto">
                            <VerticalStackLayout Grid.Column="0" Margin="0,10,0,0">
                                <Label>
                                    <Label.Text>
                                        <MultiBinding StringFormat="Id:   {0}">
                                            <Binding Path="Id"/>
                                        </MultiBinding>
                                    </Label.Text>
                                </Label>
                                <Label>
                                    <Label.Text>
                                        <MultiBinding StringFormat="Fullname:   {0} {1}">
                                            <Binding Path="FirstName"/>
                                            <Binding Path="LastName"/>
                                        </MultiBinding>
                                    </Label.Text>
                                </Label>
                                <Label>
                                    <Label.Text>
                                        <MultiBinding StringFormat="Email:   {0}">
                                            <Binding Path="Email"/>
                                        </MultiBinding>
                                    </Label.Text>
                                </Label>
                                <Label>
                                    <Label.Text>
                                        <MultiBinding StringFormat="Phone Nr:   {0}">
                                            <Binding Path="Phone"/>
                                        </MultiBinding>
                                    </Label.Text>
                                </Label>
                                <Label>
                                    <Label.Text>
                                        <MultiBinding StringFormat="Street:   {0}">
                                            <Binding Path="Street"/>
                                        </MultiBinding>
                                    </Label.Text>
                                </Label>
                                <Label>
                                    <Label.Text>
                                        <MultiBinding StringFormat="ZipCode/City:   {0}, {1}">
                                            <Binding Path="ZipCode"/>
                                            <Binding Path="City"/>
                                        </MultiBinding>
                                    </Label.Text>
                                </Label>
                            </VerticalStackLayout>
                            <Button Grid.Column="1" 
                                    HeightRequest="20"
                                    Margin="0,20,0,0"
                                    Text="X" 
                                    Command="{Binding Path=RemoveContactFromListCommand, Source={RelativeSource AncestorType={x:Type viewmodels:MainViewModel}}}" 
                                    CommandParameter="{Binding .}"/>
                        </Grid>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </Grid>
    </ScrollView>

</ContentPage>
